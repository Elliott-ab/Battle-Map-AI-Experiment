<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Battle Map</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <header class="toolbar">
            <h1>D&D Battle Map</h1>
            <div class="controls">
                <button id="addPlayerBtn" class="btn btn-primary">Add Player</button>
                <button id="addEnemyBtn" class="btn btn-danger">Add Enemy</button>
                <button id="drawCoverBtn" class="btn btn-cover">Draw Cover</button>
                <button id="gridSettingsBtn" class="btn btn-secondary">Grid Settings</button>
                <button id="clearMapBtn" class="btn btn-tertiary">Clear Map</button>
                <button id="undoBtn" class="btn btn-secondary">Undo</button>
                <button id="downloadBtn" class="btn btn-secondary">Download Map</button>
                <input type="file" id="uploadInput" style="display:none;">
                <button id="uploadBtn" class="btn btn-secondary">Upload Map</button>
                <span class="grid-info">Grid: 5ft per cell</span>
            </div>
        </header>
        <div class="main-content">
            <aside class="sidebar">
                <h3>Elements</h3>
                <div class="element-list">
                    <!-- Elements will be added here -->
                </div>
            </aside>
            <section class="map-container">
                <div class="battle-map">
                    <!-- Grid cells will be added here -->
                </div>
            </section>
        </div>
    </div>

    <!-- Edit Element Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Edit Element</h3>
            <form id="editForm">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="type">Type:</label>
                    <select id="type">
                        <option value="player">Player</option>
                        <option value="enemy">Enemy</option>
                        <option value="cover">Cover</option>
                    </select>
                </div>
                <div class="form-group hp-group" style="display:none;">
                    <label for="maxHp">Max HP:</label>
                    <input type="number" id="maxHp" min="1">
                </div>
                <div class="form-group hp-group" style="display:none;">
                    <label for="currentHp">Current HP:</label>
                    <input type="number" id="currentHp" min="0">
                </div>
                <div class="form-group movement-group" style="display:none;">
                    <label for="movement">Movement (ft):</label>
                    <input type="number" id="movement" min="0" step="5">
                </div>
                <div class="form-group damage-group" style="display:none;">
                    <label for="damage">Damage Dealt:</label>
                    <input type="number" id="damage" min="0">
                </div>
                <div class="form-group color-group" style="display:none;">
                    <label for="color">Color:</label>
                    <input type="color" id="color">
                </div>
                <div class="form-group cover-group" style="display:none;">
                    <label for="coverType">Cover Type:</label>
                    <select id="coverType">
                        <option value="half">Half Cover</option>
                        <option value="three-quarters">Three-Quarters Cover</option>
                        <option value="full">Full Cover</option>
                        <option value="difficult">Difficult Terrain</option>
                    </select>
                </div>
                <div class="form-group size-group" style="display:none;">
                    <label for="size">Size (grid squares):</label>
                    <select id="size">
                        <option value="1">1x1 (Medium)</option>
                        <option value="2">2x2 (Large)</option>
                        <option value="3">3x3 (Huge)</option>
                        <option value="4">4x4 (Gargantuan)</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Save</button>
                    <button type="button" class="btn btn-danger" id="deleteBtn">Delete</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Grid Settings Modal -->
    <div id="gridModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Grid Settings</h3>
            <form id="gridForm">
                <div class="form-group">
                    <label for="gridWidth">Grid Width:</label>
                    <input type="number" id="gridWidth" min="1" required>
                </div>
                <div class="form-group">
                    <label for="gridHeight">Grid Height:</label>
                    <input type="number" id="gridHeight" min="1" required>
                </div>
                <div class="form-group">
                    <label for="cellSize">Cell Size (feet):</label>
                    <select id="cellSize">
                        <option value="5">5 feet</option>
                        <option value="10">10 feet</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Apply Settings</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Save Map Modal -->
    <div id="saveModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Save Map</h3>
            <form id="saveForm">
                <div class="form-group">
                    <label for="fileName">File Name:</label>
                    <input type="text" id="fileName" required value="battle_map.json">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Download</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Overwrite Confirmation Modal -->
    <div id="overwriteModal" class="modal">
        <div class="modal-content">
            <h3>Overwrite Map?</h3>
            <p>Uploading a map will overwrite your current map. Continue?</p>
            <div class="form-actions">
                <button id="confirmUpload" class="btn btn-primary">Yes</button>
                <button class="btn btn-danger close">No</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>